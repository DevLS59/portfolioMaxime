---
import {getCollection} from 'astro:content'
const musicData = await getCollection('music')

// console.log(musicData)
---

<!-- section music -->
  <section class="wrapper_music" id="music">

    <div class="part-left">
      <h1> MUSIC</h1>
    </div>

    <div class="swiper myMusic">

      <div class="swiper-wrapper">

        {
          musicData.map( data => (
            <div class=" card swiper-slide">
              <div class="card__image">
                <img src={data.data.pochette} alt="card image"/>
              </div>
              <div class="card_content">
                <h3>{data.data.title}</h3>
                <a class="link" href={data.data.link} target="_blank"><img src="./images/spotify-1.svg" alt=""/></a>
                <img src="./images/deezer-logo.svg" alt=""/>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section> 


  <style lang="scss">
  
  .wrapper_music {
    background: black;
    position: relative;
    width: 100%;
    height: 100vh;
    display: flex;

    @media (max-width: 900px) {
      margin-left: 0;
    }

    .part-left {
      width: 30vw;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      mix-blend-mode: screen;
      z-index: 500;

      @media (max-width: 900px) {
        width: 100%;
        height: 15%;
        top : 60px;
      }

      h1 {
        font-weight: 800;
        font-family: "SaoTorpes";
        color: #000;
        font-size: 5vw;

        @media (max-width: 900px) {
          font-size: 3rem;
        }
      }
    }

    .swiper {
      width: 100%;
      display: flex;
      align-items: center;
    }

    .swiper-wrapper {
      width: 100%;
      height: 35em;
      display: flex;
      align-items: center;
    }

    .swiper-slide {
      background: #000;
    }

  .card {
    position: relative;
    width: 20em;
    height: 20em;
    border-radius: 2em;
    display: flex;
    align-items: center;
    margin: 0 2em;
 
    @media (max-width: 900px) {
      width: 15em;
      height: 15em;
    }

    .card_content {
      width: 100%;
      height: 100%;
      background: #fff;
      opacity: 0;
      position: absolute;
      top: 0;
      left: 0;
      transition: 0.2s;
      border-radius: 2em;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      padding : 1rem;

  
h3 {
  font-size: 1.8rem;
 margin-bottom : 3rem;
   font-family: "Gabo";
   text-align: center;
}

.link {
  
  text-align: center;
  z-index : 1000;
  position : relative;
}
      
    }
    .card_content img {
      width : 40%;



     
    }
  }
}

.card__image img {
  width: 100%;
  height: 100%;
  border-radius: 10px;
  object-fit: cover;
  -webkit-box-reflect: below 0.2px
    linear-gradient(transparent, transparent, #0002, #0004);
}

.card:hover {
  .card_content {
    opacity: 1;

  }
  }

  .card__image img {
    -webkit-box-reflect: below 0.05px
      linear-gradient(transparent, transparent, transparent, #0004);
  }

  </style>
  

<script is:inline>

    
var swiper = new Swiper(".myMusic", {
  effect: "coverflow",
  grabCursor: true,
  centeredSlides: true,
  slidesPerView: "auto",
  coverflowEffect: {
    rotate: 30,
    stretch: 0,
    depth: 300,
    modifier: 1,
    slideShadows: true,
  },
  pagination: {
    el: ".swiper-pagination",
  },
});
  </script>